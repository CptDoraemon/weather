(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),i=a.n(r),s=a(9),n=a.n(s),o=(a(17),a(10)),c=a(2),u=a(3),l=a(5),h=a(4),p=a(6),m=a(1),d=(a(7),a(18),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"header-wrapper quarter-height-wrapper grey"},i.a.createElement("h1",null," ",this.props.geoData," "),i.a.createElement("h2",null," ",this.props.getDisplayTime(this.props.selectedDataObj.time,this.props.isDaySummary)," "),i.a.createElement("h2",null," ",this.props.selectedDataObj.summary," "))}}]),t}(r.Component)),y=(a(19),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={width:this.props.width,height:this.props.height,objectFit:"cover"},t=-1===["clear-day","clear-night","rain","snow","sleet","wind","fog","cloudy","partly-cloudy-day","partly-cloudy-night"].indexOf(this.props.icon)?"na.svg":this.props.icon+".svg";return i.a.createElement("img",{src:"/weather/svg/"+t,style:e,alt:this.props.icon})}}]),t}(i.a.Component));function g(e){return i.a.createElement("div",{className:"daily-wrapper",onClick:function(){e.setSelectedDataObj(e.obj),e.setIsDaySummary(!0)}},e.time,i.a.createElement(y,{width:"50px",height:"50px",icon:e.icon}),i.a.createElement("div",{className:"daily-temp"},i.a.createElement("span",{className:"daily-temp-high"},e.temperatureHigh,"\xb0"),i.a.createElement("span",{className:"daily-temp-low"},e.temperatureLow,"\xb0")))}var b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return i.a.createElement("div",{className:"daychart-wrapper quarter-height-wrapper"},this.props.objArray.map(function(a){var r=e.props.isCelsius?Math.round(e.props.fToC(a.temperatureHigh)):Math.round(a.temperatureHigh),s=e.props.isCelsius?Math.round(e.props.fToC(a.temperatureLow)):Math.round(a.temperatureLow);return i.a.createElement(g,{key:a.time,icon:a.icon,time:t[new Date(1e3*a.time).getDay()],temperatureHigh:r,temperatureLow:s,obj:a,setSelectedDataObj:e.props.setSelectedDataObj,setIsDaySummary:e.props.setIsDaySummary})}))}}]),t}(r.Component),f=(a(20),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isReady:!1},a.tempMax=null,a.tempMin=null,a.svgHeight=null,a.svgWidth=null,a.tempArray=null,a.xInterval=null,a.topTextArea=null,a.bottomTextArea=null,a.lowestTemperatureHeight=null,a.wrapperRef=i.a.createRef(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getCoordinateY",value:function(e){var t=this.svgHeight-this.topTextArea-this.bottomTextArea-this.lowestTemperatureHeight,a=(e-this.tempMin)/(this.tempMax-this.tempMin)*t,r=this.bottomTextArea+this.lowestTemperatureHeight+a,i={tempText:r+10,chartTop:r,chartBot:this.bottomTextArea,timeText:5};for(var s in i)i.hasOwnProperty(s)&&(i[s]=this.svgHeight-i[s]);return i}},{key:"componentDidMount",value:function(){this.tempArray=this.props.objArray.map(function(e){return e.temperature});var e=this.tempArray.slice().sort(function(e,t){return e-t});this.tempMax=e[e.length-1],this.tempMin=e[0];var t=window.getComputedStyle(this.wrapperRef.current,null),a=window.parseInt(t.getPropertyValue("width"));console.log(a),this.svgWidth=8*a,this.svgHeight=100,this.xInterval=this.svgWidth/191,this.topTextArea=20,this.bottomTextArea=20,this.lowestTemperatureHeight=10,this.setState({isReady:!0})}},{key:"render",value:function(){var e=this,t={stroke:"rgb(29, 161, 242)",strokeWidth:2},a={fill:"rgba(29, 161, 242, 0.5)"},r={fill:"rgb(150, 150, 150)",fontSize:"12px"},s=i.a.createElement(i.a.Fragment,null,this.props.objArray.map(function(s,n){if(0!==n){var o=e.getCoordinateY(e.props.objArray[n-1].temperature),c=e.getCoordinateY(s.temperature),u=(n-1)*e.xInterval,l=n*e.xInterval,h=e.props.objArray[n-1].temperature,p=e.props.isCelsius?Math.round(e.props.fToC(h)):Math.round(h),m=new Date(1e3*s.time).getHours()+":00";return i.a.createElement(i.a.Fragment,{key:s.time},i.a.createElement("line",{x1:u,y1:o.chartTop,x2:l,y2:c.chartTop,style:t}),i.a.createElement("polygon",{points:"".concat(u,",").concat(o.chartBot," ").concat(u,",").concat(o.chartTop," ").concat(l,",").concat(c.chartTop," ").concat(l,",").concat(c.chartBot),style:a}),(n-1)%3===0?i.a.createElement(i.a.Fragment,null,i.a.createElement("text",{x:u,y:o.tempText,style:r},p),i.a.createElement("text",{x:u,y:o.timeText,style:r},m)):null)}return null})),n=i.a.createElement(i.a.Fragment,null,i.a.createElement("svg",{height:this.svgHeight,width:this.svgWidth},s));return i.a.createElement("div",{className:"hour-chart-wrapper quarter-height-wrapper",ref:this.wrapperRef},this.state.isReady?n:null)}}]),t}(r.Component));a(21);function v(e){return i.a.createElement("div",{className:"unit-switcher-wrapper"},i.a.createElement("span",{className:e.isCelsius?"unit-switcher-button-active":"unit-switcher-button-inactive",onClick:function(){return e.unitSwitcher(!1)}},"\xb0C"),i.a.createElement("span",null," | "),i.a.createElement("span",{onClick:function(){return e.unitSwitcher(!0)},className:e.isCelsius?"unit-switcher-button-inactive":"unit-switcher-button-active"},"\xb0F"))}function j(e){return i.a.createElement("div",{className:"selected-summary-left-wrapper"},i.a.createElement(y,{icon:e.icon,width:"80px",height:"80px"}),i.a.createElement("div",{className:"selected-summary-temperature"}," ",e.temperature," "),i.a.createElement(v,{unitSwitcher:e.unitSwitcher,isCelsius:e.isCelsius}))}function w(e){return i.a.createElement("div",{className:"selected-summary-right-wrapper grey"},i.a.createElement("div",{className:"selected-summary-right-item"},"Precipitation: ",e.precipitation,"%"),i.a.createElement("div",{className:"selected-summary-right-item"},"Humidity: ",e.humidity,"%"),i.a.createElement("div",{className:"selected-summary-right-item"},"Wind: ",e.windSpeed))}var O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=void 0===this.props.selectedDataObj.temperature?this.props.selectedDataObj.temperatureHigh:this.props.selectedDataObj.temperature,t=this.props.isCelsius?this.props.fToC(e):e;t=Math.round(t);var a=Math.round(100*this.props.selectedDataObj.precipProbability),r=Math.round(100*this.props.selectedDataObj.humidity),s=this.props.selectedDataObj.windSpeed,n=this.props.isCelsius?Math.round(this.props.mphToKmh(s))+" km/h":Math.round(s)+" mph";return i.a.createElement("div",{className:"selected-summary-wrapper quarter-height-wrapper"},i.a.createElement(j,{icon:this.props.selectedDataObj.icon,temperature:t,unitSwitcher:this.props.unitSwitcher,isCelsius:this.props.isCelsius}),i.a.createElement(w,{precipitation:a,humidity:r,windSpeed:n}))}}]),t}(r.Component),D=(a(22),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isTimeout:!1},a.timeout=null,a.showTimeoutMessage=a.showTimeoutMessage.bind(Object(m.a)(Object(m.a)(a))),a.refresh=a.refresh.bind(Object(m.a)(Object(m.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"refresh",value:function(){this.state.isTimeout&&window.location.reload()}},{key:"showTimeoutMessage",value:function(){this.setState({isTimeout:!0})}},{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.showTimeoutMessage,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.timeout=null}},{key:"render",value:function(){for(var e=[],t=0;t<"loading...".length;t++){var a={animationDelay:.2*t+"s"},r=i.a.createElement("span",{key:"loading"+t,className:"loading-span",style:a},"loading...".charAt(t));e.push(r)}var s=this.state.isTimeout?"loading-timeout-active":"loading-timeout-inactive";return i.a.createElement("div",{className:"loading-wrapper grey"},i.a.createElement("div",{className:s},i.a.createElement("div",{className:"loading-timeout-message"},"This app relies on free tiers of the weather and geocoding API services, the responses can be slow sometimes.")),i.a.createElement("div",{className:"loading-text-wrapper grey"},e),i.a.createElement("div",{className:s},i.a.createElement("div",{className:"loading-refresher",onClick:this.refresh},"refresh?")))}}]),t}(r.Component));var E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={selectedDataObj:a.props.weatherData.currently,isDaySummary:!1,isCelsius:!0},a.unitSwitcher=a.unitSwitcher.bind(Object(m.a)(Object(m.a)(a))),a.setSelectedDataObj=a.setSelectedDataObj.bind(Object(m.a)(Object(m.a)(a))),a.setIsDaySummary=a.setIsDaySummary.bind(Object(m.a)(Object(m.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getDisplayTime",value:function(e,t){var a=new Date(1e3*e),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],i=a.getHours()<10?"0"+a.getHours():a.getHours(),s=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes();return t?r:r+" "+i+":"+s}},{key:"fToC",value:function(e){return 5*(e-32)/9}},{key:"mphToKmh",value:function(e){return e/1.609}},{key:"unitSwitcher",value:function(e){this.setState({isCelsius:!e})}},{key:"setSelectedDataObj",value:function(e){this.setState({selectedDataObj:e})}},{key:"setIsDaySummary",value:function(e){this.setState({isDaySummary:e})}},{key:"render",value:function(){var e={isDaySummary:this.state.isDaySummary,isCelsius:this.state.isCelsius},t={geoData:this.props.geoData,weatherData:this.props.weatherData,selectedDataObj:this.state.selectedDataObj},a={getDisplayTime:this.getDisplayTime,fToC:this.fToC,mphToKmh:this.mphToKmh,unitSwitcher:this.unitSwitcher,setSelectedDataObj:this.setSelectedDataObj},r=Object(o.a)({},e,t,a);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d,r),i.a.createElement(O,r),i.a.createElement(f,{objArray:this.props.weatherData.hourly.data,isCelsius:this.state.isCelsius,fToC:this.fToC}),i.a.createElement(b,{objArray:this.props.weatherData.daily.data,fToC:this.fToC,setSelectedDataObj:this.setSelectedDataObj,setIsDaySummary:this.setIsDaySummary,isCelsius:this.state.isCelsius}))}}]),t}(r.Component);function S(e){return i.a.createElement("div",{className:"attributions-wrapper grey"},i.a.createElement("a",{href:"https://darksky.net/poweredby/",target:"_blank",rel:"noopener noreferrer"},"Powered by Dark Sky"),i.a.createElement("a",{href:"https://locationiq.com/",target:"_blank",rel:"noopener noreferrer"},"Search by LocationIQ.com"))}var T,C=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-wrapper"},i.a.createElement("div",{className:"app-safe-area"},this.props.isFailed?this.props.errorMessage:this.props.isLoaded?i.a.createElement(E,this.props):i.a.createElement(D,null)),i.a.createElement(S,null))}}]),t}(r.Component),k=(T=C,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,isFailed:!1},a.latitude=null,a.longitude=null,a.weatherData=null,a.geoData=null,a.errorMessage="",a.sendQuery=a.sendQuery.bind(Object(m.a)(Object(m.a)(a))),a.useMockLoacation=a.useMockLoacation.bind(Object(m.a)(Object(m.a)(a))),a.getGeoLocation=a.getGeoLocation.bind(Object(m.a)(Object(m.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"sendQuery",value:function(){var e=this,t=!1,a=!1,r="https://www.xiaoxihome.com/",i={method:"POST",mode:"cors",cache:"default",credentials:"same-origin",headers:{"content-type":"application/json"},redirect:"follow",referrer:"client",body:JSON.stringify({latitude:this.latitude,longitude:this.longitude})};fetch(r+"api/weather",i).then(function(e){return e.json()}).then(function(r){"success"===r.status?(e.weatherData=r.data,console.log(r.data),(t=!0)&&a&&e.setState({isLoaded:!0})):(e.errorMessage=r.data,e.setState({isFailed:!0}))}).catch(function(e){return console.log(e)}),fetch(r+"api/reversegeocoding",i).then(function(e){return e.json()}).then(function(r){"success"===r.status?(e.geoData=r.data,console.log(r.data),a=!0,t&&a&&e.setState({isLoaded:!0})):(e.errorMessage=r.data,e.setState({isFailed:!0}))}).catch(function(e){return console.log(e)})}},{key:"useMockLoacation",value:function(){this.latitude=43.70011,this.longitude=-79.4163,this.sendQuery()}},{key:"getGeoLocation",value:function(){var e=this;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude,e.sendQuery()},this.useMockLoacation):this.useMockLoacation()}},{key:"componentDidMount",value:function(){this.getGeoLocation()}},{key:"render",value:function(){var e={isLoaded:this.state.isLoaded,weatherData:this.weatherData,geoData:this.geoData,isFailed:this.state.isFailed,errorMessage:this.errorMessage};return i.a.createElement(T,Object.assign({},this.props,e))}}]),t}(r.Component));n.a.render(i.a.createElement(function(e){return i.a.createElement("div",{className:"index-wrapper"},i.a.createElement(k,null))},null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.fda2c274.chunk.js.map