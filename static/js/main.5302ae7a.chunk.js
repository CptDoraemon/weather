(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),s=a.n(r),o=(a(17),a(10)),c=a(1),u=a(2),l=a(4),h=a(3),p=a(5),d=a(6),m=(a(7),a(18),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"header-wrapper quarter-height-wrapper grey"},i.a.createElement("h1",null," ",this.props.geoData," "),i.a.createElement("h2",null," ",this.props.getDisplayTime(this.props.selectedDataObj.time,this.props.isDaySummary)," "),i.a.createElement("h2",null," ",this.props.selectedDataObj.summary," "))}}]),t}(n.Component)),b=(a(19),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null)}}]),t}(n.Component)),f=(a(20),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null)}}]),t}(n.Component)),g=(a(21),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={width:this.props.width,height:this.props.height,objectFit:"cover"},t=-1===["clear-day","clear-night","rain","snow","sleet","wind","fog","cloudy","partly-cloudy-day","partly-cloudy-night"].indexOf(this.props.icon)?"na.svg":this.props.icon+".svg";return i.a.createElement("img",{src:"/weather/svg/"+t,style:e,alt:this.props.icon})}}]),t}(i.a.Component));function y(e){return i.a.createElement("div",{className:"unit-switcher-wrapper"},i.a.createElement("span",{className:e.isCelsius?"unit-switcher-button-active":"unit-switcher-button-inactive",onClick:function(){return e.unitSwitcher(!1)}},"\u2103"),i.a.createElement("span",null," | "),i.a.createElement("span",{onClick:function(){return e.unitSwitcher(!0)},className:e.isCelsius?"unit-switcher-button-inactive":"unit-switcher-button-active"},"\u2109"))}function v(e){return i.a.createElement("div",{className:"selected-summary-left-wrapper"},i.a.createElement(g,{icon:e.icon,width:"80px",height:"80px"}),i.a.createElement("div",{className:"selected-summary-temperature"}," ",e.temperature," "),i.a.createElement(y,{unitSwitcher:e.unitSwitcher,isCelsius:e.isCelsius}))}function j(e){return i.a.createElement("div",{className:"selected-summary-right-wrapper"},i.a.createElement("div",null,"Precipitation: ",e.precipitation,"%"),i.a.createElement("div",null,"Humidity: ",e.humidity,"%"),i.a.createElement("div",null,"Wind: ",e.windSpeed))}var O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.selectedDataObj.temperature,t=this.props.isCelsius?this.props.fToC(e):e;t=Math.round(t);var a=100*this.props.selectedDataObj.precipProbability,n=100*this.props.selectedDataObj.humidity,r=this.props.selectedDataObj.windSpeed,s=this.props.isCelsius?this.props.mphToKmh(r)+" km/h":r+" mph";return i.a.createElement("div",{className:"selected-summary-wrapper quarter-height-wrapper"},i.a.createElement(v,{icon:this.props.selectedDataObj.icon,temperature:t,unitSwitcher:this.props.unitSwitcher,isCelsius:this.props.isCelsius}),i.a.createElement(j,{precipitation:a,humidity:n,windSpeed:s}))}}]),t}(n.Component),w=(a(22),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isTimeout:!1},a.timeout=null,a.showTimeoutMessage=a.showTimeoutMessage.bind(Object(d.a)(Object(d.a)(a))),a.refresh=a.refresh.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"refresh",value:function(){this.state.isTimeout&&window.location.reload()}},{key:"showTimeoutMessage",value:function(){this.setState({isTimeout:!0})}},{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.showTimeoutMessage,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.timeout=null}},{key:"render",value:function(){for(var e=[],t=0;t<"loading...".length;t++){var a={animationDelay:.2*t+"s"},n=i.a.createElement("span",{key:"loading"+t,className:"loading-span",style:a},"loading...".charAt(t));e.push(n)}var r=this.state.isTimeout?"loading-timeout-active":"loading-timeout-inactive";return i.a.createElement("div",{className:"loading-wrapper grey"},i.a.createElement("div",{className:r},i.a.createElement("div",{className:"loading-timeout-message"},"This app relies on free tiers of the weather and geocoding API services, the responses can be slow sometimes.")),i.a.createElement("div",{className:"loading-text-wrapper grey"},e),i.a.createElement("div",{className:r},i.a.createElement("div",{className:"loading-refresher",onClick:this.refresh},"refresh?")))}}]),t}(n.Component));var E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={selectedDataObj:a.props.weatherData.currently,isDaySummary:!1,isCelsius:!0},a.unitSwitcher=a.unitSwitcher.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getDisplayTime",value:function(e,t){var a=new Date(1e3*e),n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][a.getDay()],i=a.getHours()<10?"0"+a.getHours():a.getHours(),r=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes();return t?n:n+" "+i+":"+r}},{key:"fToC",value:function(e){return 5*(e-32)/9}},{key:"mphToKmh",value:function(e){return(e/1.609).toFixed(2)}},{key:"unitSwitcher",value:function(e){this.setState({isCelsius:!e})}},{key:"render",value:function(){var e={isDaySummary:this.state.isDaySummary,isCelsius:this.state.isCelsius},t={geoData:this.props.geoData,weatherData:this.props.weatherData,selectedDataObj:this.state.selectedDataObj},a={getDisplayTime:this.getDisplayTime,fToC:this.fToC,mphToKmh:this.mphToKmh,unitSwitcher:this.unitSwitcher},n=Object(o.a)({},e,t,a);return i.a.createElement(i.a.Fragment,null,i.a.createElement(m,n),i.a.createElement(O,n),i.a.createElement(f,null),i.a.createElement(b,null))}}]),t}(n.Component);function k(e){return i.a.createElement("div",{className:"attributions-wrapper grey"},i.a.createElement("a",{href:"https://darksky.net/poweredby/",target:"_blank",rel:"noopener noreferrer"},"Powered by Dark Sky"),i.a.createElement("a",{href:"https://locationiq.com/",target:"_blank",rel:"noopener noreferrer"},"Search by LocationIQ.com"))}var D,S=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-wrapper"},i.a.createElement("div",{className:"app-safe-area"},this.props.isFailed?this.props.errorMessage:this.props.isLoaded?i.a.createElement(E,this.props):i.a.createElement(w,null)),i.a.createElement(k,null))}}]),t}(n.Component),C=(D=S,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,isFailed:!1},a.latitude=null,a.longitude=null,a.weatherData=null,a.geoData=null,a.errorMessage="",a.sendQuery=a.sendQuery.bind(Object(d.a)(Object(d.a)(a))),a.useMockLoacation=a.useMockLoacation.bind(Object(d.a)(Object(d.a)(a))),a.getGeoLocation=a.getGeoLocation.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"sendQuery",value:function(){var e=this,t=!1,a=!1,n="https://www.xiaoxihome.com/",i={method:"POST",mode:"cors",cache:"default",credentials:"same-origin",headers:{"content-type":"application/json"},redirect:"follow",referrer:"client",body:JSON.stringify({latitude:this.latitude,longitude:this.longitude})};fetch(n+"api/weather",i).then(function(e){return e.json()}).then(function(n){"success"===n.status?(e.weatherData=n.data,console.log(n.data),(t=!0)&&a&&e.setState({isLoaded:!0})):(e.errorMessage=n.data,e.setState({isFailed:!0}))}).catch(function(e){return console.log(e)}),fetch(n+"api/reversegeocoding",i).then(function(e){return e.json()}).then(function(n){"success"===n.status?(e.geoData=n.data,console.log(n.data),a=!0,t&&a&&e.setState({isLoaded:!0})):(e.errorMessage=n.data,e.setState({isFailed:!0}))}).catch(function(e){return console.log(e)})}},{key:"useMockLoacation",value:function(){this.latitude=43.70011,this.longitude=-79.4163,this.sendQuery()}},{key:"getGeoLocation",value:function(){var e=this;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude,e.sendQuery()},this.useMockLoacation):this.useMockLoacation()}},{key:"componentDidMount",value:function(){this.getGeoLocation()}},{key:"render",value:function(){var e={isLoaded:this.state.isLoaded,weatherData:this.weatherData,geoData:this.geoData,isFailed:this.state.isFailed,errorMessage:this.errorMessage};return i.a.createElement(D,Object.assign({},this.props,e))}}]),t}(n.Component));s.a.render(i.a.createElement(function(e){return i.a.createElement("div",{className:"index-wrapper"},i.a.createElement(C,null))},null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.5302ae7a.chunk.js.map